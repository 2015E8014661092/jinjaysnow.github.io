<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="date" content="2014-11">
<meta name="keywords" content="improve python,改善Python程序">
<meta name="description" content="《编写高质量代码————改善Python程序的91个建议》：主要记录编写高质量Python程序需要注意的地方。">
<meta name="author" content="Jin Jay"><style>body {
  width: 45em;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 30px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headeranchor-link {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .headeranchor-link:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .headeranchor,
.markdown-body h2 .headeranchor,
.markdown-body h3 .headeranchor,
.markdown-body h4 .headeranchor,
.markdown-body h5 .headeranchor,
.markdown-body h6 .headeranchor {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .headeranchor-link,
.markdown-body h2:hover .headeranchor-link,
.markdown-body h3:hover .headeranchor-link,
.markdown-body h4:hover .headeranchor-link,
.markdown-body h5:hover .headeranchor-link,
.markdown-body h6:hover .headeranchor-link {
  height: 1em;
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .headeranchor-link .headeranchor,
.markdown-body h2:hover .headeranchor-link .headeranchor,
.markdown-body h3:hover .headeranchor-link .headeranchor,
.markdown-body h4:hover .headeranchor-link .headeranchor,
.markdown-body h5:hover .headeranchor-link .headeranchor,
.markdown-body h6:hover .headeranchor-link .headeranchor {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* Multimarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\f05c';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><title>改善Python程序</title></head><body><article class="markdown-body"><p>《编写高质量代码&ndash;改善Python程序的91个建议》：主要记录编写高质量Python程序需要注意的地方(个人觉得有用的建议)。</p>
<h3 id="pythonc"><a name="user-content-pythonc" href="#pythonc" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Python与C语言的不同之处</h3>
<h4 id="_1"><a name="user-content-_1" href="#_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>三元操作符</h4>
<p><code>C?X:Y</code>在Python中的表示为<code>X if C else Y</code></p>
<h3 id="_2"><a name="user-content-_2" href="#_2" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>编写函数的四个原则</h3>
<h4 id="_3"><a name="user-content-_3" href="#_3" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>原则一</h4>
<p>函数设计要尽量短小，嵌套层次不宜过深。</p>
<h4 id="_4"><a name="user-content-_4" href="#_4" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>原则二</h4>
<p>函数申明应该做到合理、简单、易于使用。</p>
<h4 id="_5"><a name="user-content-_5" href="#_5" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>原则三</h4>
<p>函数参数设计应该考虑向下兼容。</p>
<pre><code>def readline(filename):                     ### 第一版
    print &ldquo;file read completed&rdquo;
def readline(filename, logger=logger.info)  ### 第二版，使用了默认参数，兼容了上一版</code></pre>
<h4 id="_6"><a name="user-content-_6" href="#_6" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>原则四</h4>
<p>一个函数只做一件事，尽量保证函数语句粒度的一致性。</p>
<h3 id="_7"><a name="user-content-_7" href="#_7" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>将常量集中到一个文件</h3>
<pre><code class="python">class _const:
    class ConstError(TypeError): pass
    class ConstCaseError(ConstError): pass

    def __setattr__(self, name, value):
        if self.__dict__.has_key(name):
            raise self.ConstError, &quot;Can't change const. %s&quot; % name
        if not name.isupper():
            raise self.ConstCaseError, 'const name &quot;%s&quot; is not all uppercase' % name
        self.__dict__[name] = value
import sys
sys.modules[__name__] = _const()
</code></pre>

<p>上面的代码对应的模块名未const，使用时只需要import const，便可定义常量了，例如：</p>
<pre><code>import const
const.COMPANY = &ldquo;APPLE&rdquo;</code></pre>
<h3 id="assert"><a name="user-content-assert" href="#assert" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>利用assert语句来发现问题</h3>
<pre><code>assert expression1 [&ldquo;,&rdquo; expression2]</code></pre>
<p>断言实际是被设计用来捕获用户所定义的约束的，而不是用来捕获程序本身错误的，所以需要谨慎使用。</p>
<h3 id="_8"><a name="user-content-_8" href="#_8" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>数据交换值的时候不推荐使用中间变量</h3>
<pre><code>x,y = y,x
</code></pre>
<h3 id="type"><a name="user-content-type" href="#type" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>不推荐使用type来进行类型检查</h3>
<p><strong>基于内建类型扩展的用户自定义类型，type函数并不能准确返回结果。</strong><br />
正确做法是：如果类型有对应的工厂函数，可以使用工厂函数对类型进行相应的转换，如<code>list(listing)</code>，<code>str(name)</code>等，否则可以使用<code>isinstance()</code>函数来检测。</p>
<pre><code>isinstance(object, classinfo)
</code></pre>
<h3 id="eval"><a name="user-content-eval" href="#eval" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>警惕eval()的安全漏洞</h3>
<blockquote>
<p>eval is evil.<br />
<strong>如果使用对象不是信任源，应该尽量避免使用eval，在需要使用eval的地方可用安全性更好的<code>ast.literal_eval</code>替代。</strong></p>
</blockquote>
<h3 id="is"><a name="user-content-is" href="#is" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>分清==与is的适用场景</h3>
<p><code>x is y</code>当且仅当x和y是同一个对象的时候才返回True。<br />
<strong>判断两个对象相等应该使用==而不是is。</strong></p>
<h3 id="unicode"><a name="user-content-unicode" href="#unicode" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>考虑兼容性，尽可能使用Unicode</h3>
<p><strong>decode()</strong> 解码<br />
<strong>encode()</strong> 编码  </p>
<pre><code># coding=utf-8
</code></pre>
<h3 id="module"><a name="user-content-module" href="#module" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>构建合理的包层次来管理module</h3>
<p>包结构：</p>
<pre><code>Package/ __init__.py
    Module1.py
    Module2.py
    Subpackage/ __init__.py
        Module1.py
        Module2.py
</code></pre>
<p><code>__init__.py</code>通过在该文件中定义<code>__all__</code>变量，控制需要导入的子包或模块。</p>
<pre><code>__all__ = [&lsquo;Module1&rsquo;, &lsquo;Module2&rsquo;, &lsquo;Subpackage&rsquo;]</code></pre>
<h3 id="with"><a name="user-content-with" href="#with" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>使用with自动关闭资源</h3>
<pre><code>with expression [as target]:
    codes
</code></pre>
<h3 id="_9"><a name="user-content-_9" href="#_9" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>遵循异常处理的基本原则</h3>
<p><img alt="exceptionhandle.png" src="http://jinjaysnow.github.io/images/exceptionhandle.png" /></p>
<ol>
<li>注意异常的粒度，不推荐在try中放入过多的代码。</li>
<li>谨慎使用单独的except语句处理所有异常，最好能定位具体的异常。</li>
<li>注意异常捕获的顺序，在合适的层次处理异常。</li>
<li>使用更为友好的异常信息，遵守异常参数的规范。</li>
</ol>
<h3 id="join"><a name="user-content-join" href="#join" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>连接字符串优先使用join而不是+</h3>
<h3 id="format"><a name="user-content-format" href="#format" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>格式化字符串是尽量使用.format方式而不是%</h3>
<h4 id="_10"><a name="user-content-_10" href="#_10" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>%转换标记</h4>
<pre><code>%[转换标记] [宽度[.精确度]]
</code></pre>
<table>
<thead>
<tr>
<th>转换标记</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>表示左对齐</td>
</tr>
<tr>
<td>+</td>
<td>在整数之前加上+</td>
</tr>
<tr>
<td>空格</td>
<td>在整数之前保留空格</td>
</tr>
<tr>
<td>###</td>
<td>在八进制数前面显示(&lsquo;0&rsquo;)，在十六禁止前面显示&lsquo;0x&rsquo;或者’0X&rsquo;</td>
</tr>
<tr>
<td>0</td>
<td>表示转换值若位数不够则用0填充而非默认的空格</td>
</tr>
<tr>
<td>c</td>
<td>转换为单个字符，对于数据将转换为改值所对应的Ascii码</td>
</tr>
<tr>
<td>s</td>
<td>转换为字符串，对于非字符串对象，将默认调用str()函数进行转换</td>
</tr>
<tr>
<td>r</td>
<td>用repr()函数进行字符串转换</td>
</tr>
<tr>
<td>i d</td>
<td>转换为带符号的十进制数</td>
</tr>
<tr>
<td>u</td>
<td>转换为不带符号的十进制数</td>
</tr>
<tr>
<td>o</td>
<td>转换为不带符号的八进制数</td>
</tr>
<tr>
<td>x X</td>
<td>转换为不带符号的十六进制数</td>
</tr>
<tr>
<td>e E</td>
<td>转换为科学计数法表示的浮点数</td>
</tr>
<tr>
<td>f F</td>
<td>转成浮点数(小数部分自然截断)</td>
</tr>
<tr>
<td>g G</td>
<td>如果指数大于-4或者小于精度值则和e相同，其他情况与f相同；如果指数大于-4或者小鱼精度值则和E相同，其他情况与F相同</td>
</tr>
</tbody>
</table>
<p>例：</p>
<pre><code>iitemdict = {&lsquo;itemname&rsquo;:&rsquo;circumference&rsquo;, &lsquo;radius&rsquo;:3, &lsquo;value&rsquo;: match.pi*radius*2}
print &ldquo;the %(itemname)s of a circle with radius %(radius)f is %(value)0.3f&rdquo; % itemdict</code></pre>
<h4 id="format_1"><a name="user-content-format_1" href="#format_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>format方式</h4>
<pre><code>[[填充符][对齐方式]][符号][#][0][宽度][,][.精确度][转换类型]
</code></pre>
<p><strong>.format方式格式化字符串的对齐方式</strong></p>
<table>
<thead>
<tr>
<th>对齐方式</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;</td>
<td>表示左对齐， 是大多数对象为默认的对齐方式</td>
</tr>
<tr>
<td>></td>
<td>表示右对齐，数值默认的对齐方式</td>
</tr>
<tr>
<td>=</td>
<td>仅对数值类型有效，如果有符号的话，在符号后数值前进行填充</td>
</tr>
<tr>
<td>^</td>
<td>居中对齐，用空格进行填充</td>
</tr>
</tbody>
</table>
<p><strong>.format方式格式化字符串符号列表</strong></p>
<table>
<thead>
<tr>
<th>符号</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>正数前加+，附属前加-</td>
</tr>
<tr>
<td>-</td>
<td>正数前不加符号，负数前加-，为数值的默认形式</td>
</tr>
<tr>
<td>空格</td>
<td>正数前加空格，负数前加-</td>
</tr>
</tbody>
</table>
<p>例：</p>
<pre><code>&ldquo;The number {0:,} inn hex is:{0:#x}, the number {1} in oct is {1:#o}&rdquo;.format(4746, 45)
输出为：&rsquo;the number4,746 in hex is: 0x128a, the number 45 in oct is 0o55&rsquo;

&ldquo;the max number is {max}, the min number is {min}, the averagenumber is {average:0.3f}&rdquo;.format(max=189, min=12.6, average=23.5)
输出为：&rsquo;the max number is 189, the min number is 12.6, the averagenumber is 23.500&rsquo;

point = (1,3)
&lsquo;X:{0[0]};Y:{0[1]}&rsquo;.format(point)
输出为：&rsquo;X:1;Y:3&rsquo;</code></pre>
<h3 id="_11"><a name="user-content-_11" href="#_11" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>区别对待可变对象和不可变对象</h3>
<p>Python中一切皆对象，每一个对象都一个唯一的标示符(id())、类型(type())以及值。对象根据其值能否修改该分为可变对象和不可变对象，其中<strong>数字、字符串、元组</strong>属于不可变对象；字典、列表、字节数组属于可变对象。因此，字符串中某个字符不可修改。</p>
<pre><code># encoding:utf-8
class Student(object):
    &quot;&quot;&quot;test student&quot;&quot;&quot;
    def __init__(self, name, course=[]):
        &quot;&quot;&quot;init&quot;&quot;&quot;
        self.name = name
        self.course = course
    def addcourse(self, coursename):
        self.course.append(coursename)
    def printcourse(self):
        for item in self.course:
            print item

if __name__ == '__main__':
    stuA = Student(&quot;Jin Jay&quot;)
    stuA.addcourse(&quot;Math&quot;)
    stuA.addcourse(&quot;English&quot;)
    print stuA.name + &quot;'s course:&quot;
    stuA.printcourse()
    print &quot;----------------&quot;
    stuB = Student(&quot;Snow&quot;)
    stuB.addcourse(&quot;Chinese&quot;)
    stuB.addcourse(&quot;Physics&quot;)
    print stuB.name + &quot;'s course:&quot;
    stuB.printcourse()
</code></pre>

<p>输出为：</p>
<pre><code>Jin Jay&rsquo;s course:
Math
English
----------------
Snow&rsquo;s course:
Math
English
Chinese
Physics</code></pre>
<p>由于init()函数的第二个参数是个默认参数，默认参数在函数被调用的时候仅仅被评估一次，以后都会使用第一次评估的结果，因此实际上对象空间里面的course所指向的是list的地址，每次操作的实际上是list所指向的具体列表。故我们在将可变对象作为函数默认参数的时候要特别警惕，<strong>对可变对象的更改会直接影响原对象</strong>。解决这个问题，最好的方式是传入None作为默认参数，在创建对象的时候动态生成列表。</p>
<pre><code>def __init__(self, name, course=None):
    self.name = name
    if course is None:course=[]
    self.course = course
</code></pre>
<p>对可变对象，需要注意浅拷贝</p>
<pre><code>&gt;&gt;&gt; list1 = [&lsquo;a&rsquo;, &lsquo;b&rsquo;, &lsquo;c&rsquo;]
&gt;&gt;&gt; list2 = list1
&gt;&gt;&gt; list1.append(&lsquo;d&rsquo;)
&gt;&gt;&gt; list1
[&lsquo;a&rsquo;, &lsquo;b&rsquo;, &lsquo;c&rsquo;, &lsquo;d&rsquo;]
&gt;&gt;&gt; list2
[&lsquo;a&rsquo;, &lsquo;b&rsquo;, &lsquo;c&rsquo;, &lsquo;d&rsquo;]    # list2也发生变化
&gt;&gt;&gt; list3 = list1[:]    # 切片是浅拷贝
&gt;&gt;&gt; list3.remove(&lsquo;a&rsquo;)
&gt;&gt;&gt; list3
[&lsquo;b&rsquo;, &lsquo;c&rsquo;, &lsquo;d&rsquo;]
&gt;&gt;&gt; list1
[&lsquo;a&rsquo;, &lsquo;b&rsquo;, &lsquo;c&rsquo;, &lsquo;d&rsquo;]
&gt;&gt;&gt; id(list3)           # list3指向新内存
4536661200
&gt;&gt;&gt; id(list1)
4536477456
&gt;&gt;&gt; id(list2)
4536477456</code></pre>
<h3 id="_12"><a name="user-content-_12" href="#_12" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>函数传参既不是传值也不是传引用</h3>
<p>正确的叫法应该是传对象或者传对象的引用。函数参数在传递的过程中将整个对象传入，对可变对象的修改在函数外部以及内部都可见，调用者和被调用者之间共享这个对象；而对于不可变对象，由于并不能真正被修改，因此，修改该往往是通过生成一个新对象然后赋值来实现的。</p>
<h3 id="_13"><a name="user-content-_13" href="#_13" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>慎用变长参数</h3>
<p>Python支持可变长度的参数列表，可以通过在函数定义的时候使用<code>*args</code>和<code>**kwargs</code>这两个特殊语法来实现。</p>
<ol>
<li>使用<code>*args</code>来实现可变参数列表：<code>*args</code>勇于接受一个包装为元组形式的参数列表来传递非关键字参数，参数个数可以任意。</li>
<li>使用<code>**kwargs</code>接受字典形式的关键字参数列表，其中字典的键值对分别表示不可变参数的参数名和值。</li>
</ol>
<h3 id="strrepr"><a name="user-content-strrepr" href="#strrepr" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>深入理解str()和repr()的区别</h3>
<ol>
<li>两者之间的目标不同：str()主要面向用户，其目的是可读性，返回形式为用户友好性和可读性都较强的字符串类型；而repr()面向的是Python解释器，或者说开发人员，其目的是准确性，其返回值表示Python解释器内部的含义，常作为编程人员的debug用途。</li>
<li>在解释其中直接输入a时默认调用repr()函数，而print a则调用str()。</li>
<li>repr()返回值一般可以用eval()函数来还原对象。</li>
<li>这两个方法分别调用内建的<code>__str__()</code>和<code>__repr__()</code>方法。</li>
</ol>
<h3 id="staticmethodclassmethod"><a name="user-content-staticmethodclassmethod" href="#staticmethodclassmethod" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>分清staticmethod和classmethod的适用场景</h3>
<p>Python中的静态方法和类方法都依赖于装饰器来实现。其中静态方法的用法如下：</p>
<pre><code>class C(object):
    @staticmethod
    def f(arg1, arg2, &hellip;):</code></pre>
<p>类方法的用法如下：</p>
<pre><code>class C(object):
    @classmethod
    def f(cls, arg1, arg2, &hellip;):</code></pre>
<h3 id="_14"><a name="user-content-_14" href="#_14" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>掌握字符串基本用法</h3>
<p>编写多行字符串小技巧：</p>
<pre><code>s = (&lsquo;select * &lsquo;
    &lsquo;from atable &lsquo;
    &lsquo;where afield=&rdquo;value&rdquo;&rsquo;)</code></pre>
<p>判断一个变量是否是字符串，使用isinstance(s, basestring).</p>
<ol>
<li>性质判定<br />
<code>is*()</code>、<code>*with()</code></li>
<li>查找替换<br />
    count()、find()、index()、sub()、rfind()、rindex()、rindex()<br />
    推荐按使用in、not in 判断是否包含子串<br />
    replace(old, new[,count]),如果指定count，就最多替换count次，否则全部替换。</li>
<li>分切与连接<br />
    partition(sep)、split([sep[, maxsplit]]):partition()返回三个元素的元组对象[left, sep, right];split()中maxsplit是分切的次数。</li>
<li>变形<br />
    lower()、upper()、capitalize()、swapcase()</li>
<li>填空与删减<br />
    strip([chars])、lstrip()、rstrip()<br />
    center(width[, fillchar])、ljust(width[, fillchar])、rjust(width[, fillchar])、zfill(width)、expandtabs([tabsize])</li>
</ol>
<h3 id="sortsorted"><a name="user-content-sortsorted" href="#sortsorted" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>按需选择sort()或者sorted()</h3>
<pre><code>sorted(iterable[, cmp[, key[, reverse]]])
s.sort([cmp[, key[, reverse]]])
</code></pre>
<ol>
<li>cmp为用户定义的任何比较函数，函数的参数为两个可比较的元素，函数根据地一个参数与第二个参数的关系依次返回-1、0、1</li>
<li>key是带一个参数的函数，用来为每个元素提取比较值</li>
<li>reverse表示排序结果是否反转（默认从小到大）</li>
</ol>
<p>当排序对象时列表时，sorted()函数会返回一个排序后的列表，原有列表保持不变；而sort()函数会直接修改原有列表，函数返回为None。</p>
<p>无论是sort()还是sorted()传入参数key比传入参数cmp效率更高。</p>
<p>sorted()函数功能更强大，，使用它可以方便地对不同的数据结构进行排序：<br />
<strong>对字典排序</strong></p>
<pre><code>phonebook = {&lsquo;Linda&rsquo;: &lsquo;7750&rsquo;, &lsquo;Bob&rsquo;: &lsquo;9345&rsquo;, &lsquo;Carol&rsquo;: &lsquo;5834&rsquo;}
from operator import itemgetter
sorted_pb = sorted(phonebook.iteritems(), key=itemgetter(1))</code></pre>
<p><strong>多维list排序</strong></p>
<pre><code>from operator import itemgetter
gameresult = [[&lsquo;Bob&rsquo;, 95.00, &lsquo;A&rsquo;], [&lsquo;Alan&rsquo;, 86.0, &lsquo;C&rsquo;], [&lsquo;Mandy&rsquo;, 82.5,&rsquo;A&rsquo;], [&lsquo;Bob&rsquo;, 86, &lsquo;E&rsquo;]]
sorted(gameresult, key=itemgetter(2, 1))</code></pre>
<h3 id="copy"><a name="user-content-copy" href="#copy" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>使用copy模块深拷贝对象</h3>
<p><strong>浅拷贝</strong>  构造一个新的复合对象并将从原对象中发现的引用插入该对象中。</p>
<p><strong>深拷贝</strong> 也构造一个新的复合对象，但是遇到引用会继续递归拷贝其所指向的具体内容，使用copy模块的deepcopy()操作实现。深拷贝得到的对象与原对象是相互独立的。</p>
<h3 id="configparser"><a name="user-content-configparser" href="#configparser" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>深入掌握ConfigParser</h3>
<h4 id="getboolean"><a name="user-content-getboolean" href="#getboolean" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>getboolean()</h4>
<p>getboolean()将0、no、false、off转义为False，对应的1、yes、true、on都被转义为True，其他值都会导致抛出ValueError异常。</p>
<p>配置项的查找规则<br />
1. 如果找不到节名，就抛出NoSectionError<br />
2. 如果给定的配置项出现在get()方法的vars参数中，则返回vars参数中的值<br />
3. 如果在指定的接种含有给定的值，则返回其值<br />
4. 在配置文件中有[DEFAULT]节，当读取的配置项不在指定的节里时，ConfigParser会在[DEFAULT]节中查找<br />
5. 如果在构造函数的defaults参数中有指定的配置项，则返回其值<br />
6. 抛出NoOptionError</p>
<pre><code>[DEFAULT]
conn_str = %(dbn)s://%(user)s:%(pw)s@%(host)s:%(port)s/%(db)s
dbn = mysql
user = root
host = localhost
port = 3308
 [db1]
user = aaa
pw = ppp
db = example
 [db2]
host = 192.168.0.110
pw = www
db = example


import ConfigParser
conf = ConfigParser.ConfigParser()
conf.read(&lsquo;format.conf&rsquo;)
print conf.get(&lsquo;db1&rsquo;, &lsquo;conn_str&rsquo;)
print conf.get(&lsquo;db2&rsquo;, &lsquo;conn_str&rsquo;)</code></pre>
<h3 id="argparse"><a name="user-content-argparse" href="#argparse" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>使用argparse处理命令行参数</h3>
<pre><code>import argparse
parser = argparse.ArgumentParser()
parser.add_argument(&lsquo;-o&rsquo;, &lsquo;&ndash;outpu&rsquo;)
parser.add_argument(&lsquo;-v&rsquo;, dest=&rsquo;verbose&rsquo;, action=&rsquo;store_true&rsquo;)
args = parser.parse_args()
parser.add_argument(&lsquo;bar&rsquo;, type=argparser.FileType(&lsquo;w&rsquo;))
parser.add_args([&lsquo;output.txt&rsquo;])
parser.add_argument(&lsquo;door&rsquo;, type=int, choices=range(1, 4))</code></pre>
<h3 id="pandascsv"><a name="user-content-pandascsv" href="#pandascsv" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>使用pandas处理大型CSV文件</h3>
<p>CSV(Comma Separated Values)逗号分隔型值的纯文本格式文件。</p>
<pre><code>import pandas
pandas.read_csv()
# 分块处理
pandas.read_table()
</code></pre>
<h3 id="elementtreexml"><a name="user-content-elementtreexml" href="#elementtreexml" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>一般情况下使用ElementTree解析XML</h3>
<p><strong>ElementTree的主要方法</strong></p>
<table>
<thead>
<tr>
<th>主要的方法、属性</th>
<th>方法说明和使用</th>
</tr>
</thead>
<tbody>
<tr>
<td>getroot()</td>
<td>返回xml文档的根节点</td>
</tr>
<tr>
<td>find() findall() findtext()</td>
<td>从根节点开始搜索</td>
</tr>
<tr>
<td>iter(tag=None)</td>
<td>从根节点开始，根据传入的元素的tag返回所有的元素集合的迭代器</td>
</tr>
<tr>
<td>iterfind()</td>
<td>根据传入的tag名称或者path以迭代器的形式返回所有的子元素</td>
</tr>
</tbody>
</table>
<p><strong>Element的主要方法</strong></p>
<table>
<thead>
<tr>
<th>主要的方法、属性</th>
<th>方法说明和使用</th>
</tr>
</thead>
<tbody>
<tr>
<td>tag</td>
<td>字符串，用来表示元素所代表的名称</td>
</tr>
<tr>
<td>text</td>
<td>表示元素对应的具体值</td>
</tr>
<tr>
<td>attrib</td>
<td>用字典表示的元素的属性</td>
</tr>
<tr>
<td>get(key, default=None)</td>
<td>根据元素属性字典的key值获取对应的值，如果找不到对应的属性，则返回default</td>
</tr>
<tr>
<td>iterms()</td>
<td>将元素属性以（名称，值）的形式返回</td>
</tr>
<tr>
<td>keys()</td>
<td>返回元素属性的key值结合</td>
</tr>
<tr>
<td>find() findall()</td>
<td>查找</td>
</tr>
<tr>
<td>list(elem)</td>
<td>根据传入的元素返回其所有的子节点</td>
</tr>
</tbody>
</table>
<h3 id="json"><a name="user-content-json" href="#json" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>使用JSON序列化</h3>
<pre><code>try: import simplejson as json
except ImportError: import json
</code></pre>
<h3 id="traceback"><a name="user-content-traceback" href="#traceback" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>使用traceback获取栈信息</h3>
<ol>
<li>traceback.print_exception(type, value, traceback[, limit[, file]])<br />
    根据limit的设置打印栈信息，file为None的情况下定位到sysstderr，否则则写入文件；其中type、value、traceback这三个参数对应的值可以从sys.exe_info()中获取</li>
<li>tracebreak.print_exc([limit[, file]])<br />
    打印三部分信息：错误类型、错误对应的值、具体的trace信息</li>
<li>traceback.format_exc([limit])<br />
    与print_exec类似，区别在与返回值为字符串</li>
<li>traceback.extract_stack([file[, limit]])<br />
    从当前栈帧中提取trace信息</li>
</ol>
<h3 id="logging"><a name="user-content-logging" href="#logging" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>使用logging记录日志信息</h3>
<p>日志级别，使用<code>Logger.setLevel(level)</code>来设置</p>
<table>
<thead>
<tr>
<th>Level</th>
<th>使用情形</th>
</tr>
</thead>
<tbody>
<tr>
<td>DEBUG</td>
<td>详细的信息，在追踪问题的时候使用</td>
</tr>
<tr>
<td>INFO</td>
<td>正常的信息</td>
</tr>
<tr>
<td>WARNING</td>
<td>一些不可预见的问题发生，或者将要发生，如磁盘空间低等，但不影响程序的运行</td>
</tr>
<tr>
<td>ERROR</td>
<td>由于某些严重的问题，程序中的一些功能受到影响</td>
</tr>
<tr>
<td>CRITICAL</td>
<td>严重的错误，或者程序本身不能够继续运行</td>
</tr>
</tbody>
</table>
<p>logging包含四个主要对象<br />
1. <strong>logger</strong>：logger是程序信息输出的接口，分散在不同的代码中，是得程序可以在运行的时候记录相应的信息，并根据设置的日志级别或filter来决定哪些信息需要输出，并将这些信息分发到其关联的handler。常用的方法有logger.setlevel()、logger.addhandler()、logger.removehandler()、logger.addfileter()、logger.debug()、logger.info()、logger.warning()、logger.error()等。<br />
2. <strong>handler</strong>：handler用来处理信息的输出，可以将信息输出到控制台、文件或者网络。常用的有streamhandler和filehandler。<br />
3. <strong>formatter</strong>：决定log信息的格式，格式使用类似于%(dictionary key)s的形式来定义。<br />
4. <strong>filter</strong>：用来决定哪些信息需要输出。可以被handler和logger使用，支持层次关系。</p>
<p>logging.basicConfig([**kwargs])提供对日志系统的基本配置。支持的字典参数为：</p>
<table>
<thead>
<tr>
<th>格式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>filename</td>
<td>指定FileHandler的文件名，而不是默认的StreamHandler</td>
</tr>
<tr>
<td>filemode</td>
<td>打开文件的模式，同open函数中的同名参数，默认为&rsquo;a&rsquo;</td>
</tr>
<tr>
<td>format</td>
<td>输出格式字符串</td>
</tr>
<tr>
<td>datefmt</td>
<td>日期格式</td>
</tr>
<tr>
<td>level</td>
<td>设置根logger的日志级别</td>
</tr>
<tr>
<td>stream</td>
<td>指定StreamHandler，这个参数若与filename冲突，忽略stream</td>
</tr>
</tbody>
</table>
<pre><code>logging.basicConfig(
    level=logging.DEBUG,
    filename=&rsquo;log.txt&rsquo;,
    filemode=&rsquo;w&rsquo;,
    format=&rsquo;%(asctime)s %(filename)s[line:%(lineno)d %(levelname)s %(message)s&rsquo;,
)</code></pre>
<p><strong>logging使用建议</strong><br />
1. 尽量为logging取一个名字而不是采用默认，这样当在不同的模块中使用的时候，其他模块只需要使用以下代码就可以方便地使用同一个logger，因为它本质上复合单例模式。</p>
<pre><code>import logging
logging.basicConfig(level=logging.DEBUG)
logger=logging.getLogger(__name__)
</code></pre>
<ol>
<li>为了方便地找出问题所在，logging的名字建议以模块或者class来命名。logging名称遵循&rsquo;.&rsquo;划分的继承规则，根是root logger, logger a.b的父logger对象为a。</li>
<li>logging只是线程安全的，不支持多进程写入同一个日志文件，因此对于多个进程，需要配置不同的日志文件。</li>
</ol>
<h3 id="threading"><a name="user-content-threading" href="#threading" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>使用threading模块编写多线程程序</h3>
<h3 id="queue"><a name="user-content-queue" href="#queue" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>使用Queue使多线程变成更安全</h3>
<blockquote>
<p>程序中存在三种类型的bug：你的bug、我的bug和多线程。</p>
</blockquote>
<p>Queue模块有三种队列：<br />
1. Queue.Queue(maxsize): 先进先出，maxsize为队列的大小，为非正数时为无限循环队列。<br />
2. Queue.LifoQueue(maxsize): 后进先出，即栈。<br />
3. Queue.PriorityQueue(maxsize): 优先级队列。</p>
<p>多线程下载实例：</p>
<pre><code>import os, Queue, threading, urllib2
class DownloadThread(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init(self)
        self.queue = queue
    def run(self):
        while True:
            url = self.queue.get()
            print self.name+&rdquo; begin download&rdquo;+url+&rdquo;&hellip;&rdquo;
            self.download_file(url)
            self.queue.task_donw()
            print self.name+&rdquo; download completed!!!&rdquo;
    def download_file(self, url):
        urlhandler = urllib2.urlopen(url)
        fname = os.path.basename(url)+&rsquo;html&rsquo;
        with open(fname, &ldquo;wb&rdquo;) as f:
            while True:
                chunk = urlhandler.read(1024)
                if not chunk: break
                f.write(chunk)
if __name__ == &ldquo;__main__&rdquo;:
    urls = [&ldquo;http://www.python.org/moin/WebProgramming&rdquo;,
            &ldquo;https://www.createspace.com&rdquo;,
            &ldquo;http://wiki.python.org/moin/Documentation&rdquo;
        ]
    queue = Queue.Queue()
    for i in range(5):
        t = DownloadThread(queue)
        t.setDaemon(True)
        t.start()
    for url in urls:
        queue.put(url)
    queue.join()</code></pre>
<h3 id="_15"><a name="user-content-_15" href="#_15" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>利用模块实现单例模式</h3>
<p>使用模块的好处：<br />
1. 所有的变量都会绑定到模块<br />
2. 模块只初始化一次<br />
3. import机制是线程安全的（保证了在兵法状态下模块也只有一个实例）</p>
<h3 id="mixin"><a name="user-content-mixin" href="#mixin" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>用mixin模式让程序更加灵活</h3>
<p>模板方法模式是子类在不改变算法结构的情况下，重新定义算法中的某些步骤。</p>
<pre><code>import mixins
def staff():
    people = People()
    bases = []
    for i in config.checked():
        base.append(getattr(mixins, i))
    people.__bases__ += tuple(bases)
    return people
</code></pre>
<h3 id="_16"><a name="user-content-_16" href="#_16" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>用发布订阅模式实现松耦合</h3>
<pre><code>pip install message
</code></pre>
<h3 id="_17"><a name="user-content-_17" href="#_17" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>用状态模式美化代码</h3>
<pre><code>pip install state
</code></pre>
<p>实例</p>
<pre><code class="python">from state import curr, switch, stateful, State, behavior
@statefull
class User(object):
    class NeedSignin(State):
        default = True
        @behavior
        def signin(self, usr, pwd):
            ...
            switch(self, Player.Signin)
    class Signin(State):
        @behavior
        def move(self, dst):...
        @behavior
        def atk(self, other):...
</code></pre>

<h3 id="9595init9595"><a name="user-content-9595init9595" href="#9595init9595" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>__init__不是构造方法</h3>
<p><code>__new__()</code>方法才是真正的类的构造方法。<br />
<code>object.__new__(cls[,args...])</code>: 其中cls代表类，args为参数列表。<br />
<code>object.__init__(self[,args...])</code>: 其中self代表是咧对象，args为参数列表。</p>
<p><code>__new__</code> VS <code>__init__</code><br />
1. <code>__new__</code>是静态方法，而<code>__init__</code>是实例方法<br />
2. <code>__new__</code>方法一般需要返回类的对象，当返回类的对象时将会自动调用<code>__init__</code>方法进行初始化，如果没有对象返回，则<code>__init__</code>方法不会被调用。<code>__init__</code>不需要显示返回，默认为None，否则会在运行时抛出TypeError<br />
3. 当需要控制实例创建的时候可使用<code>__new__</code>方法，而控制实例初始化的时候使用<code>__init__</code><br />
4. 一般情况下不需要覆盖<code>__new__</code>，但当子类继承自不可变类型，如str、int、unicode或者tuple的时候，往往需要覆盖该方法<br />
5. 当需要覆盖<code>__new__</code>和<code>__init__</code>方法的时候这两个方法的参数必须保持一致，如果不一致将导致异常<br />
6. 作为用来初始化的<code>__init__</code>方法在多继承的情况下，子类的<code>__init__</code>方法如果不显示调用父类的<code>__init__</code>方法，则父类的<code>__init__</code>方法不会被调用</p>
<h3 id="_18"><a name="user-content-_18" href="#_18" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>理解名字查找机制</h3>
<ol>
<li><strong>局部作用域</strong>：默认情况下，函数内部任意的复制操作所定义的变量名，如果没用global语句，则申明都为局部变量，即仅在该函数内可见。</li>
<li><strong>全局作用域</strong>：定义在Python模块文件中的变量名拥有全局作用于，需要注意的是这里的全局仅限单个文件，挤在一个文件的顶层的变量名尽在这个文件内可见，并非所有的文件，其他文件中项实用这些变量名必须先导入文件对应的模块。</li>
<li><strong>嵌套作用域</strong>：在多重函数嵌套的情况下才会考虑到。需要注意的是global语句仅针对全局变量，在嵌套作用域的情况下，如果想在嵌套的函数内修改该外层函数中定义的变量，及时使用global进行申明也不能达到目的，其结果最终是在嵌套的函数所在的命名空间中创建了一个新的变量。</li>
<li><strong>内置作用域</strong>：通过一个标准库中名为<code>__builtin__</code>的模块来实现。</li>
</ol>
<p>朝赵顺序遵循变量解析机制LEGB法则。</p>
<h3 id="mro"><a name="user-content-mro" href="#mro" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>理解MRO与多继承</h3>
<p>MRO(Method Resolution Order, 方法解析顺序)</p>
<h3 id="__getattr____getattribute__"><a name="user-content-__getattr____getattribute__" href="#__getattr____getattribute__" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>区别<code>__getattr__</code>与<code>__getattribute__</code></h3>
<p><code>__getattribute__()</code>总会被调用，而<code>__getattr__()</code>只有在<code>__getattribute__()</code>中印发异常的情况下才会被调用。</p>
<h3 id="property"><a name="user-content-property" href="#property" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>使用更为安全的property</h3>
<p>property是用来实现属性可管理性的built-in数据类型，其实只是一种特殊的数据描述符。使用property的优点：<br />
1. 代码更简洁，可读性更强。<br />
2. 更好的管理属性的访问。<br />
3. 代码可维护性更好。<br />
4. 控制属性访问权限，提高数据安全性。</p>
<div class="toc">
<ul>
<li><a href="#pythonc">Python与C语言的不同之处</a><ul>
<li><a href="#_1">三元操作符</a></li>
</ul>
</li>
<li><a href="#_2">编写函数的四个原则</a><ul>
<li><a href="#_3">原则一</a></li>
<li><a href="#_4">原则二</a></li>
<li><a href="#_5">原则三</a></li>
<li><a href="#_6">原则四</a></li>
</ul>
</li>
<li><a href="#_7">将常量集中到一个文件</a></li>
<li><a href="#assert">利用assert语句来发现问题</a></li>
<li><a href="#_8">数据交换值的时候不推荐使用中间变量</a></li>
<li><a href="#type">不推荐使用type来进行类型检查</a></li>
<li><a href="#eval">警惕eval()的安全漏洞</a></li>
<li><a href="#is">分清==与is的适用场景</a></li>
<li><a href="#unicode">考虑兼容性，尽可能使用Unicode</a></li>
<li><a href="#module">构建合理的包层次来管理module</a></li>
<li><a href="#with">使用with自动关闭资源</a></li>
<li><a href="#_9">遵循异常处理的基本原则</a></li>
<li><a href="#join">连接字符串优先使用join而不是+</a></li>
<li><a href="#format">格式化字符串是尽量使用.format方式而不是%</a><ul>
<li><a href="#_10">%转换标记</a></li>
<li><a href="#format_1">format方式</a></li>
</ul>
</li>
<li><a href="#_11">区别对待可变对象和不可变对象</a></li>
<li><a href="#_12">函数传参既不是传值也不是传引用</a></li>
<li><a href="#_13">慎用变长参数</a></li>
<li><a href="#strrepr">深入理解str()和repr()的区别</a></li>
<li><a href="#staticmethodclassmethod">分清staticmethod和classmethod的适用场景</a></li>
<li><a href="#_14">掌握字符串基本用法</a></li>
<li><a href="#sortsorted">按需选择sort()或者sorted()</a></li>
<li><a href="#copy">使用copy模块深拷贝对象</a></li>
<li><a href="#configparser">深入掌握ConfigParser</a><ul>
<li><a href="#getboolean">getboolean()</a></li>
</ul>
</li>
<li><a href="#argparse">使用argparse处理命令行参数</a></li>
<li><a href="#pandascsv">使用pandas处理大型CSV文件</a></li>
<li><a href="#elementtreexml">一般情况下使用ElementTree解析XML</a></li>
<li><a href="#json">使用JSON序列化</a></li>
<li><a href="#traceback">使用traceback获取栈信息</a></li>
<li><a href="#logging">使用logging记录日志信息</a></li>
<li><a href="#threading">使用threading模块编写多线程程序</a></li>
<li><a href="#queue">使用Queue使多线程变成更安全</a></li>
<li><a href="#_15">利用模块实现单例模式</a></li>
<li><a href="#mixin">用mixin模式让程序更加灵活</a></li>
<li><a href="#_16">用发布订阅模式实现松耦合</a></li>
<li><a href="#_17">用状态模式美化代码</a></li>
<li><a href="#9595init9595">__init__不是构造方法</a></li>
<li><a href="#_18">理解名字查找机制</a></li>
<li><a href="#mro">理解MRO与多继承</a></li>
<li><a href="#__getattr____getattribute__">区别__getattr__与__getattribute__</a></li>
<li><a href="#property">使用更为安全的property</a></li>
</ul>
</div></article></body></html>